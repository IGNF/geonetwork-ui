<div class="flex flex-row gap-x-4 items-center justify-center md:justify-start">
  <p
    class="font-title text-[28px] font-medium text-title text-center sm:text-left"
    translate
  >
    record.metadata.api
  </p>
  <gn-ui-previous-next-buttons
    *ngIf="hasPagination"
    [isFirst]="isFirstStep"
    [isLast]="isLastStep"
    (directionButtonClicked)="changeStepOrPage($event)"
  ></gn-ui-previous-next-buttons>
</div>
<gn-ui-carousel (currentStepChange)="updateView()" containerClass="gap-4 py-10">
  <gn-ui-api-card
    *ngFor="let link of apiLinks$ | async"
    [title]="link.name"
    [link]="link"
    [currentLink]="selectedApiLink"
    class="w-[320px]"
    [ngClass]="{
      'card-shadow': link !== selectedApiLink || !selectedApiLink,
      'bg-neutral-100': link === selectedApiLink
    }"
    (openRecordApiForm)="openRecordApiForm($event)"
    (openModalLayer)="openModalLayer($event)"
  >
  </gn-ui-api-card>
</gn-ui-carousel>
<div
  *ngIf="displayLayer"
  class="fixed inset-0 w-screen h-screen flex z-50 bg-white"
>
  <button
    type="button"
    class="flex items-center gap-0.5 text-primary group"
    (click)="closeModalLayer()"
  >
    <div
      class="text-sm font-medium opacity-50 group-hover:opacity-100 uppercase tracking-wide mt-0.5"
      translate
    >
      record.metadata.api.form.closeButton
    </div>
    <mat-icon
      class="!w-5 !h-5 text-xl font-bold material-symbols-outlined !flex items-center"
      >close
    </mat-icon>
  </button>
</div>

<div
  *ngIf="displayApiIgnForm"
  class="content transition-all duration-300 w-screen mx-auto -ml-[calc(50vw-50%)] overflow-hidden"
  [ngClass]="selectedApiLink ? 'ease-in' : 'ease-out'"
  [style.height]="maxHeight"
>
  <div class="py-8 w-full h-full bg-slate-200 bg-opacity-50">
    <div
      class="flex flex-col justify-between container-lg lg:mx-auto bg-white h-full"
    >
      <div class="flex flex-wrap justify-between sm:mb-2 ng-star-inserted p-5">
        <p
          class="text-[21px] text-title font-title"
          *ngIf="selectedApiLink?.accessServiceProtocol !== 'GPFDL'"
          translate
        >
          record.metadata.api.form.title
        </p>
        <p
          class="text-[21px] text-title font-title"
          *ngIf="selectedApiLink?.accessServiceProtocol === 'GPFDL'"
          translate
        >
          record.metadata.api.form.title.gpf
        </p>
        <button
          type="button"
          class="flex items-center gap-0.5 text-primary group"
          (click)="closeRecordApiForm()"
        >
          <div
            class="text-sm font-medium opacity-50 group-hover:opacity-100 uppercase tracking-wide mt-0.5"
            translate
          >
            record.metadata.api.form.closeButton
          </div>
          <mat-icon
            class="!w-5 !h-5 text-xl font-bold material-symbols-outlined !flex items-center"
            >close
          </mat-icon>
        </button>
      </div>
      <gn-ui-ign-api-dl
        class="grow"
        *ngIf="displayApiIgnForm"
        [apiLink]="selectedApiLink"
      ></gn-ui-ign-api-dl>

      <gn-ui-record-api-form
        *ngIf="!displayApiIgnForm"
        [apiLink]="selectedApiLink"
      ></gn-ui-record-api-form>
    </div>
  </div>
</div>
