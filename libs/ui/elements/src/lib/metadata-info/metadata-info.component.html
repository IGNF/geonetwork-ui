<div class="mb-6 md-description sm:mb-4 sm:pr-16">
  <gn-ui-content-ghost ghostClass="h-32" [showContent]="fieldReady('abstract')">
    <gn-ui-max-lines [maxLines]="6" *ngIf="metadata.abstract">
      <div>
        <gn-ui-markdown-parser
          [textContent]="metadata.abstract"
        ></gn-ui-markdown-parser>
      </div>
    </gn-ui-max-lines>
  </gn-ui-content-ghost>
</div>

<gn-ui-expandable-panel [title]="'record.metadata.usage' | translate">
  <div class="flex flex-col gap-4 mr-4 py-5 rounded text-gray-700">
    <span class="text-primary font-bold" *ngFor="let license of licenses">
      {{ license }}
    </span>
    <div *ngIf="restrictions.length">
      <p translate class="font-bold">record.metadata.limitations</p>
      <div class="inline-block">
        <span *ngFor="let restriction of restrictions">
          {{ restriction }}
        </span>
      </div>
    </div>

    <span class="text-primary font-medium noUsage" *ngIf="!hasUsage">
      {{ 'record.metadata.noUsage' | translate }}
    </span>
  </div>
</gn-ui-expandable-panel>
<gn-ui-expandable-panel
  class="metadata-origin"
  *ngIf="
    metadata.lineage ||
    metadata.recordUpdated ||
    metadata.updateFrequency ||
    metadata.status
  "
  [title]="'record.metadata.origin' | translate"
>
  <p
    *ngIf="metadata.lineage"
    class="mb-5 pt-4 whitespace-pre-line break-words"
    gnUiLinkify
  >
    {{ metadata.lineage }}
  </p>
  <div
    class="py-4 px-6 rounded bg-gray-100 grid grid-cols-2 gap-y-[10px] gap-x-[20px] text-gray-700 info-grid"
  >
    <div *ngIf="metadata.recordUpdated">
      <p class="text-sm" translate>record.metadata.updatedOn</p>
      <p class="text-primary font-medium mt-1">
        {{ metadata.recordUpdated && metadata.recordUpdated.toLocaleString() }}
      </p>
    </div>
    <div *ngIf="updateFrequency">
      <p class="text-sm" translate>record.metadata.updateFrequency</p>
      <p
        class="text-primary font-medium mt-1 updateFrequency"
        translate
        [translateParams]="{ count: updatedTimes }"
      >
        {{ updateFrequency }}
      </p>
    </div>
    <div *ngIf="metadata.status">
      <p class="text-sm" translate>record.metadata.updateStatus</p>
      <p class="text-primary font-medium mt-1" translate>
        domain.record.status.{{ metadata.status }}
      </p>
    </div>
  </div>
</gn-ui-expandable-panel>
<gn-ui-expandable-panel
  *ngIf="metadata.landingPage"
  [title]="'record.metadata.details' | translate"
>
  <div class="flex flex-col gap-4 mr-4 py-5 rounded text-gray-700">
    <div *ngIf="metadata.recordUpdated">
      <p class="text-sm" translate>record.metadata.updatedOn</p>
      <p class="text-primary font-medium">
        {{ metadata.recordUpdated && metadata.recordUpdated.toLocaleString() }}
      </p>
    </div>
    <div *ngIf="metadata.landingPage">
      <p class="text-sm" translate>record.metadata.sheet</p>
      <p class="text-primary font-medium" translate>
        <a [href]="metadata.landingPage" target="_blank">
          <span class="break-all" gnUiLinkify>{{ metadata.landingPage }}</span>
        </a>
      </p>
    </div>
    <div *ngIf="metadata.ownerOrganization">
      <p class="text-sm" translate>record.metadata.owner</p>
      <p class="text-primary font-medium">
        {{ metadata.ownerOrganization.name }}
      </p>
    </div>
    <div *ngIf="metadata.uniqueIdentifier">
      <p class="text-sm" translate>record.metadata.uniqueId</p>
      <div class="flex flex-row content-align items-end gap-1">
        <gn-ui-copy-text-button
          [text]="metadata.uniqueIdentifier"
          [tooltipText]="'tooltip.id.copy' | translate"
          [displayText]="false"
        ></gn-ui-copy-text-button>
        <p class="text-primary font-medium">
          {{ metadata.uniqueIdentifier }}
        </p>
      </div>
    </div>
    <div *ngIf="metadata.themes?.length">
      <p class="text-sm mb-1" translate>record.metadata.themes</p>
      <div class="sm:pb-4 sm:pr-16">
        <gn-ui-badge
          class="inline-block mr-2 lowercase"
          *ngFor="let theme of metadata.themes"
          >{{ theme }}</gn-ui-badge
        >
      </div>
    </div>
    <div *ngIf="metadata.keywords?.length">
      <p class="text-sm mb-1" translate>record.metadata.keywords</p>
      <div class="sm:pb-4 sm:pr-16">
        <gn-ui-badge
          class="inline-block mr-2 mb-2 lowercase"
          (click)="onKeywordClick(keyword)"
          [clickable]="true"
          *ngFor="let keyword of metadata.keywords"
          >{{ keyword }}</gn-ui-badge
        >
      </div>
    </div>
  </div>
</gn-ui-expandable-panel>
